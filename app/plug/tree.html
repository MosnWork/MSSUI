<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!-- no cache headers -->
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="no-cache">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="Cache-Control" content="no-cache">
    <!-- end no cache headers -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MSSUI</title>
    <!------------------------>
    <!-- CSS请在发布前合并压缩 -->
    <!------------------------>
    <!-- 重置默认 -->
    <link href="../../assets/css/reset.css" rel="stylesheet">
    <!-- 基础功能 -->
    <link href="../../assets/css/base.css" rel="stylesheet">
    <!-- 栅格布局 -->
    <link href="../../assets/css/gird.css" rel="stylesheet">
    <!-- 模块开发 -->
    <link href="../../assets/css/modules.css" rel="stylesheet">
    <!-- 字体文件 -->
    <link rel="stylesheet" href="../../assets/css/font-awesome.min.css">
    <!-- 支持IE78 IE6就死去吧-->
    <!--[if IE 7]>
        <link rel="stylesheet" href="../../assets/css/font-awesome-ie7.min.css">
    <![endif]-->
    <!-- Demo  这个请在实际项目中删除 -->
    <link href="../../assets/css/demo.css" rel="stylesheet">
    <!------------------------>
    <!-- CSS请在发布前合并压缩 -->
    <!------------------------>
</head>

<body>
    <!--主视图-->
    <div class="demo-container">
        <div class="fluid-row ">
            <div class="column16">
                <div class="column-actual ">
                    <h4>树形结构<small>css 前缀：mss-tree</small></h4>
                </div>
            </div>
        </div>
        <div class="fluid-row">
            <div class="column6">
                <div class="column-actual fn-mr10">
                    <div class="mss-box">
                        <div class="mss-box-head fn-linear-light">
                            <h4>树形结构<small>含选择器.</small><a href="#">→</a></h4>
                        </div>
                        <div class="mss-box-container">
                            基本上是配合JS工作的，如果需要直接写入请操作本页面代码
                        </div>
                    </div>
                </div>
                <div class="fluid-row fn-mt10">
                    <div class="column16">
                        <div class="column-actual fn-mt10">
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Red" id="tinit">显示</button>
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Orange" id="tclose">关闭</button>
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Orange" id="trest">重置</button>
                        </div>
                    </div>
                </div>
                <div class="fluid-row fn-mt10">
                    <div class="column16">
                        <div class="column-actual fn-mt10">
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Red" id="treplace">替换数据(本地)</button>
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Orange" id="treplaceasyn">替换数据(异步)</button>
                        </div>
                    </div>
                </div>
                <div class="fluid-row fn-mt10">
                    <div class="column16">
                        <div class="column-actual fn-mt10">
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Red" id="trefresh">刷新</button>
                        </div>
                    </div>
                </div>
                <div class="fluid-row fn-mt10">
                    <div class="column16">
                        <div class="column-actual fn-mt10">
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Red" id="tget">获取选中</button>
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Orange" id="tgettxt">指定获取（value）</button>
                            <button class="mss-button mss-button-small fn-bra5 fn-mr10 fn-bg-Green" id="tgetnumber">获取选中量</button>
                        </div>
                    </div>
                </div>
                <div class="fluid-row fn-mt10">
                    <div class="column16">
                        <div class="column-actual fn-mt10">
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Red" id="tdel">删除某个节点</button>
                        </div>
                    </div>
                </div>
                <div class="fluid-row fn-mt10">
                    <div class="column16">
                        <div class="column-actual fn-mt10">
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Red" id="tcheckall">全选-仅限多选</button>
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Orange" id="tcancel">取消</button>
                        </div>
                    </div>
                </div>
                <div class="fluid-row fn-mt10">
                    <div class="column16">
                        <div class="column-actual fn-mt10">
                            <button class="mss-button fn-mr10 fn-bra5 fn-bg-Red" id="tdestroy">销毁</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="column10">
                <div class="column-actual" id="gridtree">

                </div>
            </div>
        </div>
    </div>
    <!-- script start -->
    <script src="../../json/city.js"></script>
    <script src="../../assets/js/require.js" data-main="../../assets/js/config"></script>
    <script>
        //页面初始化
        require(['jquery', 'tree'], function($, T) {
            var demo = T.init({
                    target: "#gridtree", //渲染节点
                    data: cityJsosn.nodes, //数据
                    check: true, //选择
                    multi: true, //多选
                    line: true,
                    nodecheck: false, //仅允许子节点选择
                    callback: function(str) {
                        console.log(str);
                    },
                    inputcallback: function(fn, str) {
                        console.log(fn);
                        console.log(str);
                    },
                    asyn: false,
                    url: "../../json/demo.json" //异步地址---参数为id
                });

            //显示
            $("#tinit").click(function() {
                demo.show()
            })
            
            //关闭
            $("#tclose").click(function() {
                demo.hide()
            })
            
            //重置
            $("#trest").click(function() {
                demo.reset({
                    target: "#gridtree", //渲染节点
                    check: true, //选择
                    multi: false, //多选
                    line: true,
                    nodecheck: false, //仅允许子节点选择
                    callback: function(str) {
                        console.log(str);
                    },
                    inputcallback: function(fn, str) {
                        console.log(fn);
                        console.log(str);
                    },
                    asyn: true,
                    url: "../../json/demo.json" //异步地址---参数为id
                })
            })

            //替换数据-本地
            $("#treplace").click(function() {
                demo.replace(cityJsosn.nodes, false);
            })
            
            //替换数据(异步)    
            $("#treplaceasyn").click(function() {
                demo.replace("../../json/demo.json", true);
            })
            
            //刷新   
            $("#trefresh").click(function() {
                demo.refresh();
            })
            
            //获取选中   
            $("#tget").click(function() {
                console.log(demo.get());
                //alert(demo.get());
            })
            
            //指定获取（value）   
            $("#tgettxt").click(function() {
                console.log(demo.get("value"));
                alert(demo.get("value"));
            })
            
            //获取选中量 
            $("#tgetnumber").click(function() {
                console.log(demo.getnumber());
                alert(demo.getnumber());
            })
            
            //删除某个节点 
            $("#tdel").click(function() {
               demo.del("\u5317\u4eac");
            })
            
            //全选-仅限多选
            $("#tcheckall").click(function() {
               demo.checkall();
            })
            
            //取消
            $("#tcancel").click(function() {
               demo.cancel();
            })
            
            //销毁
            $("#tdestroy").click(function() {
               demo.destroy();
            })
        });
    </script>
    <!-- script end -->
</body>

</html>